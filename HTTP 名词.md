## HTTP 名词  
  
### HTTP
  
> 超文本传输协议（ HTTP ， HyperText Transfer Protocol)是互联网上应用最为广泛的一种网络协议。所有的 WWW 文件都必须遵守这个标准。设计 HTTP 最初的目的是为了提供一种发布和接收 HTML 页面的方法。 1960 年美国人 Ted Nelson 构思了一种通过计算机处理文本信息的方法，并称之为超文本（ hypertext ）,这成为了 HTTP 超文本传输协议标准架构的发展根基。 Ted Nelson 组织协调万维网协会（ World Wide Web Consortium ）和互联网工程工作小组（ Internet Engineering Task Force ）共同合作研究，最终发布了一系列的 RFC ，其中著名的 RFC 2616 定义了 HTTP 1.1 。  

### TCP/IP
  
> Transmission Control Protocol/Internet Protocol 的简写，中译名为传输控制协议/因特网互联协议，又名网络通讯协议，是 Internet 最基本的协议、 Internet 国际互联网络的基础，由网络层的 IP 协议和传输层的 TCP 协议组成。 TCP/IP  定义了电子设备如何连入因特网，以及数据如何在它们之间传输的标准。协议采用了 4 层的层级结构，每一层都呼叫它的下一层所提供的协议来完成自己的需求。通俗而言： TCP 负责发现传输的问题，一有问题就发出信号，要求重新传输，直到所有数据安全正确地传输到目的地。而 IP 是给因特网的每一台联网设备规定一个地址。  
  
### IP
  
> IP 层接收由更低层（网络接口层例如以太网设备驱动程序）发来的数据包，并把该数据包发送到更高层--- TCP 或 UDP 层；相反， IP 层也把从 TCP 或 UDP 层接收来的数据包传送到更低层。 IP 数据包是不可靠的，因为 IP 并没有做任何事情来确认数据包是否按顺序发送的或者有没有被破坏， IP 数据包中含有发送它的主机的地址（源地址）和接收它的主机的地址（目的地址）。  
高层的 TCP 和 UDP 服务在接收数据包时，通常假设包中的源地址是有效的。也可以这样说， IP 地址形成了许多服务的认证基础，这些服务相信数据包是从一个有效的主机发送来的。 IP 确认包含一个选项，叫作 IP source routing ，可以用来指定一条源地址和目的地址之间的直接路径。对于一些 TCP 和 UDP 的服务来说，使用了该选项的 IP 包好像是从路径上的最后一个系统传递过来的，而不是来自于它的真实地点。这个选项是为了测试而存在的，说明了它可以被用来欺骗系统来进行平常是被禁止的连接。那么，许多依靠 IP 源地址做确认的服务将产生问题并且会被非法入侵。  

### TCP
  
> TCP 是面向连接的通信协议，通过三次握手建立连接，通讯完成时要拆除连接，由于 TCP 是面向连接的所以只能用于端到端的通讯。  
TCP 提供的是一种可靠的数据流服务，采用“带重传的肯定确认”技术来实现传输的可靠性。 TCP 还采用一种称为“滑动窗口”的方式进行流量控制，所谓窗口实际表示接收能力，用以限制发送方的发送速度。  
如果 IP 数据包中有已经封好的 TCP 数据包，那么 IP 将把它们向‘上’传送到 TCP 层。 TCP 将包排序并进行错误检查，同时实现虚电路间的连接。 TCP 数据包中包括序号和确认，所以未按照顺序收到的包可以被排序，而损坏的包可以被重传。  
TCP 将它的信息送到更高层的应用程序，例如 Telnet 的服务程序和客户程序。应用程序轮流将信息送回 TCP 层， TCP 层便将它们向下传送到 IP 层，设备驱动程序和物理介质，最后到接收方。  
面向连接的服务（例如 Telnet 、 FTP 、 rlogin 、 X Windows 和 SMTP ）需要高度的可靠性，所以它们使用了 TCP 。 DNS 在某些情况下使用 TCP （发送和接收域名数据库），但使用 UDP 传送有关单个主机的信息。  
### UDP
  
> UDP 是面向无连接的通讯协议， UDP 数据包括目的端口号和源端口号信息，由于通讯不需要连接，所以可以实现广播发送。  
UDP 通讯时不需要接收方确认，属于不可靠的传输，可能会出现丢包现象，实际应用中要求程序员编程验证。  
UDP 与 TCP 位于同一层，但它不管数据包的顺序、错误或重发。因此， UDP 不被应用于那些使用虚电路的面向连接的服务， UDP 主要用于那些面向查询---应答的服务，例如 NFS 。相对于 FTP 或 Telnet ，这些服务需要交换的信息量较小。使用 UDP 的服务包括 NTP （网络时间协议）和 DNS （ DNS 在进行区域传输的时候使用 TCP 协议，其它时候则使用 UDP 协议）。  
欺骗 UDP 包比欺骗 TCP 包更容易，因为 UDP 没有建立初始化连接（也可以称为握手）（因为在两个系统间没有虚电路），也就是说，与 UDP 相关的服务面临着更大的危险。  

### ICMP
  
> ICMP 与 IP 位于同一层，它被用来传送 IP 的控制信息。它主要是用来提供有关通向目的地址的路径信息。 ICMP 的 'Redirect' 信息通知主机通向其他系统的更准确的路径，而‘ Unreachable ’信息则指出路径有问题。另外，如果路径不可用了， ICMP 可以使 TCP 连接‘体面地’终止。 PING 是最常用的基于 ICMP 的服务。  

### 通讯端口
  
> TCP 和 UDP 服务通常有一个客户/服务器的关系，例如，一个 Telnet 服务进程开始在系统上处于空闲状态，等待着连接。用户使用 Telnet 客户程序与服务进程建立一个连接。客户程序向服务进程写入信息，服务进程读出信息并发出响应，客户程序读出响应并向用户报告。因而，这个连接是双工的，可以用来进行读写。  
两个系统间的多重 Telnet 连接是如何相互确认并协调一致呢？ TCP 或 UDP 连接唯一地使用每个信息中的如
> 
> 下四项进行确认：  
>
> > 源 IP 地址 发送包的 IP 地址。  
> > 目的 IP 地址 接收包的 IP 地址。  
> > 源端口 源系统上的连接的端口。  
> > 目的端口 目的系统上的连接的端口。  
>   
> 端口是一个软件结构，被客户程序或服务进程用来发送和接收信息。一个端口对应一个 16 比特的数。服务进程通常使用一个固定的端口，例如， SMTP 使用 25 、 Xwindows 使用 6000 。这些端口号是‘广为人知’的，因为在建立与特定的主机或服务的连接时，需要这些地址和目的地址进行通讯。  

### 数据格式
  
> 数据帧：帧头 + IP 数据包 + 帧尾 （帧头包括源和目标主机 MAC 初步地址及类型，帧尾是校验字）  
IP 数据包： IP 头部 + TCP 数据信息（ IP 头包括源和目标主机 IP 地址、类型、生存期等）  
TCP 数据信息： TCP 头部+实际数据 (TCP 头包括源和目标主机端口号、顺序号、确认号、校验字等）  

### IP 地址
  
> 在 Internet 上连接的所有计算机，从大型机到微型计算机都是以独立的身份出现，我们称它为主机。为了实现各主机间的通信，每台主机都必须有一个唯一的网络地址。就好像每一个住宅都有唯一的门牌一样，才不至于在传输资料时出现混乱。  
Internet 的网络地址是指连入 Internet 网络的计算机的地址编号。所以，在 Internet 网络中，网络地址唯一地标识一台计算机。  
我们都已经知道， Internet 是由几千万台计算机互相连接而成的。而我们要确认网络上的每一台计算机，靠的就是能唯一标识该计算机的网络地址，这个地址就叫做 IP （ Internet Protocol 的简写）地址，即用 Internet 协议语言表示的地址。  
在 Internet 里， IP 地址是一个 32 位的二进制地址，为了便于记忆，将它们分为 4 组，每组 8 位，由小数点分开，用四个字节来表示，而且，用点分开的每个字节的数值范围是 0~255 ，如 202.116.0.1 ，这种书写方法叫做点数表示法。  

### URG
  
> 此标志表示 TCP 包的紧急指针域（后面马上就要说到）有效，用来保证 TCP 连接不被中断，并且督促中间层设备要尽快处理这些数据；  

### ACK
  
> 此标志表示应答域有效，就是说前面所说的 TCP 应答号将会包含在 TCP 数据包中；有两个取值： 0 和 1 ，为 1 的时候表示应答域有效，反之为 0 ；  

### PSH
  
> 这个标志位表示 Push 操作。所谓 Push 操作就是指在数据包到达接收端以后，立即传送给应用程序，而不是在缓冲区中排队；  

### RST
  
> 这个标志表示连接复位请求。用来复位那些产生错误的连接，也被用来拒绝错误和非法的数据包；  
  
### SYN
  
> 表示同步序号，用来建立连接。 SYN 标志位和 ACK 标志位搭配使用，当连接请求的时候， SYN=1 ， ACK=0 ；连接被相应的时候， SYN=1 ， ACK= 1 ；这个标志的数据包经常被用来进行端口扫描。扫描者发送一个只有 SYN 的数据包，如果对方主机响应了一个数据包回来，就表明这台主机存在这个端口；但是由于这种扫描方式只是进行 TCP 三次握手的第一次握手，因此这种扫描的成功表示被扫描的机器不很安全，一台安全的主机将会强制要求一个连接严格的进行 TCP 的三次握手；  
  
### FIN
  
> 表示发送端已经达到数据末尾，也就是说双方的数据传送完成，没有数据可以传送了，发送 FIN 标志位的 TCP 数据包后，连接将被断开。这个标志的数据包也经常被用于进行端口扫描。当一个 FIN 标志的 TCP 数据包发送到一台计算机的特定端口，如果这台计算机响应了这个数据，并且反馈回来一个 RST 标志的 TCP 包，就表明这台计算机上没有打开这个端口，但是这台计算机是存在的；如果这台计算机没有反馈回来任何数据包，这就表明，这台被扫描的计算机存在这个端口。  


> 在 TCP 层，有个 FLAGS 字段，这个字段有以下几个标识： SYN, FIN, ACK, PSH, RST, URG. 其中，对于我们日常的分析有用的就是前面的五个字段。  
> 
> 它们的含义是： SYN 表示建立连接， FIN 表示关闭连接， ACK 表示响应， PSH 表示有 DATA 数据传输， RST 表示连接重置。其中， ACK 是可能与 SYN ， FIN 等同时使用的，比如 SYN 和 ACK 可能同时为 1 ，它表示的就是建立连接之后的响应，如果只是单个的一个 SYN ，它表示的只是建立连接。 TCP 的几次握手就是通过这样的 ACK 表现出来的。但 SYN 与 FIN 是不会同时为 1 的，因为前者表示的是建立连接，而后者表示的是断开连接。 RST 一般是在 FIN 之后才会出现为 1 的情况，表示的是连接重置。一般地，当出现 FIN 包或 RST 包时，我们便认为客户端与服务器端断开了连接；而当出现 SYN 和 SYN ＋ ACK 包时，我们认为客户端与服务器建立了一个连接。 PSH 为 1 的情况，一般只出现在 DATA 内容不为 0 的包中，也就是说 PSH 为 1 表示的是有真正的 TCP 数据包内容被传递。 TCP 的连接建立和连接关闭，都是通过请求－响应的模式完成的。  

