## 架构  

### 堆栈和队列  

* `队列` 只能在队头做删除操作,在队尾做插入操作.而栈只能在栈顶做插入和删除操作  
* `栈` 就是一个桶，后放进去的先拿出来，它下面本来有的东西要等它出来之后才能出来  
* `堆` 是在程序运行时，而不是在程序编译时，申请某个大小的内存空间  

    > 即动态分配内存，对其访问和对一般内存的访问没有区别。
堆是指程序运行是申请的动态内存，而栈只是指一种使用堆的方法(即先进后出)
栈是先进后出的，但是于堆而言却没有这个特性，两者都是存放临时数据的地方。 对于堆，我们可以随心所欲的进行增加变量和删除变量，不要遵循什么次序，只要你喜欢。

### Lucene 和 Sphinx

* Lucene

    * 索引文件格式独立于应用平台
    * 在传统全文检索引擎的倒排索引的基础上，实现了分块索引，能够针对新的文件建立小文件索引，提升索引速度
    * 优秀的面向对象的系统架构，使得对于Lucene扩展的学习难度降低
    * 设计了独立于语言和文件格式的文本分析接口，索引器通过接受Token流完成索引文件的创立，用户扩展新的语言和文件格式，只需要实现文本分析的接口
    * 已经默认实现了一套强大的查询引擎，用户无需自己编写代码即使系统可获得强大的查询能力，Lucene的查询实现中默认实现了布尔操作、模糊查询、分组查询等等
    
* Sphinx
    
    * 性能非常出色，在2-4 GB的文本上搜索，平均0.1秒内获得结果
    * 高扩展性（实测最高可对100GB的文本建立索引，单一索引可包含1亿条记录）
    * 支持分布式检索
    * 和数据库集成性很好
    * 做 MySQL 的全文检索得心应手

### 什么是架构

> 用一段通俗的话说，架构就是 "最高层次的规划，是难以改变的决定"  

> 架构和人生一样
决定上什么样的学校、
决定学什么样的专业、
毕业后决定找什么样的工作、
进什么样的公司、
过什么样的生活
这些都是一种架构，一旦它们被决定，则会影响深厚并且难以改变。

作为一名架构师

* 应当从公司利益出发

    * `架构要素一`：性能，比如搜索引擎 `Lucene` 和 `Sphinx` 的选择。
    * `架构要素二`：可用性，保证业务服务的 `7 * 24` 的可用性，最大减小服务瘫痪的几率，比如 `Mongodb ReplSet`。
    * `架构要素三`：伸缩性，考虑公司业务增长情况，我们应当使用集群，并且在业务的增减下很容易的实现对集群的控制，比如分布式文件系统和分布式数据库。
    * `架构要素四`：扩展性，将业务和可用服务进行分离，通过服务的思想来实现业务，这样在今后的产品变更时，可以很容易的实现这些需求，比如开放平台和接口。
    * `架构要素五`：安全性，保护网站不受恶意访问和攻击，比如 `CSRF` 和 `XSS` 的避免。
    
* 更好的服务开发者，使得开发更简单、更方便
* 更好的服务运维人员，使得运维变得更容易，比如 Docker 的诞生
